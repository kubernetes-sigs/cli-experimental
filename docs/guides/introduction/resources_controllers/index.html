<!doctype html>
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="generator" content="Hugo 0.74.3" />

<META NAME="ROBOTS" CONTENT="NOINDEX, NOFOLLOW">



<link rel="shortcut icon" href="/favicons/favicon.ico" >
<link rel="apple-touch-icon" href="/favicons/apple-touch-icon-180x180.png" sizes="180x180">
<link rel="icon" type="image/png" href="/favicons/favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="/favicons/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/favicons/android-36x36.png" sizes="36x36">
<link rel="icon" type="image/png" href="/favicons/android-48x48.png" sizes="48x48">
<link rel="icon" type="image/png" href="/favicons/android-72x72.png" sizes="72x72">
<link rel="icon" type="image/png" href="/favicons/android-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="/favicons/android-144x144.png" sizes="144x144">
<link rel="icon" type="image/png" href="/favicons/android-192x192.png" sizes="192x192">

<title>Resources &#43; Controllers Overview | SIG CLI</title><meta property="og:title" content="Resources &#43; Controllers Overview" />
<meta property="og:description" content="Kubernetes Resources and Controllers Overview
" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://kubectl.docs.kubernetes.io/guides/introduction/resources_controllers/" />
<meta property="article:modified_time" content="2020-09-23T14:28:56+05:30" /><meta property="og:site_name" content="SIG CLI" />
<meta itemprop="name" content="Resources &#43; Controllers Overview">
<meta itemprop="description" content="Kubernetes Resources and Controllers Overview
">
<meta itemprop="dateModified" content="2020-09-23T14:28:56+05:30" />
<meta itemprop="wordCount" content="1002">



<meta itemprop="keywords" content="" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Resources &#43; Controllers Overview"/>
<meta name="twitter:description" content="Kubernetes Resources and Controllers Overview
"/>





<link rel="preload" href="/scss/main.min.3a0a27233a6adef263918bba23834e5f51f6132a3540e2ada13e8003c3abb83e.css" as="style">
<link href="/scss/main.min.3a0a27233a6adef263918bba23834e5f51f6132a3540e2ada13e8003c3abb83e.css" rel="stylesheet" integrity="">


<script
  src="https://code.jquery.com/jquery-3.3.1.min.js"
  integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
  crossorigin="anonymous"></script>

<script
  src="https://unpkg.com/lunr@2.3.8/lunr.min.js"
  integrity="sha384-vRQ9bDyE0Wnu+lMfm57BlYLO0/XauFuKpVsZPs7KEDwYKktWi5+Kz3MP8++DFlRY"
  crossorigin="anonymous"></script>


    <title>Resources &#43; Controllers Overview | SIG CLI</title>
  </head>
  <body class="td-page">
    <header>
      
<nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar">
        <a class="navbar-brand" href="/">
		<span class="navbar-logo"></span><span class="text-uppercase font-weight-bold">SIG CLI</span>
	</a>
	<div class="td-navbar-nav-scroll ml-md-auto" id="main_navbar">
		<ul class="navbar-nav mt-2 mt-lg-0">
			
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				<a class="nav-link" href="/installation/" ><span>Installation</span></a>
			</li>
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				<a class="nav-link active" href="/guides/" ><span class="active">Guides</span></a>
			</li>
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				<a class="nav-link" href="/references/" ><span>Reference</span></a>
			</li>
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				<a class="nav-link" href="/faq/" ><span>FAQ</span></a>
			</li>
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				<a class="nav-link" href="/blog/" ><span>Blog</span></a>
			</li>
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				<a class="nav-link" href="/contributing/" ><span>Contributing</span></a>
			</li>
			
			
			
			<li class="nav-item dropdown d-none d-lg-block">
				

<a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
	English
</a>
<div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
	
	<a class="dropdown-item" href="/zh/">简体中文</a>
	
</div>
			</li>
			
		</ul>
	</div>
	<div class="navbar-nav d-none d-lg-block">


<input
  type="search"
  class="form-control td-search-input"
  placeholder="&#xf002; Search this site…"
  aria-label="Search this site…"
  autocomplete="off"
  
  data-offline-search-index-json-src="/offline-search-index.223cef4aa7d35ce05d35e863204807e6a69d63ef7911c4224abb1a02b256f8ce123efbb3545e5e6b75e92171b62888069a77c770912f35edb36802526da28593.json"
  data-offline-search-base-href="/"
>

</div>
</nav>

    </header>
    <div class="container-fluid td-outer">
      <div class="td-main">
        <div class="row flex-xl-nowrap">
          <div class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none">
            




<div id="td-sidebar-menu" class="td-sidebar__inner">
  
  <form class="td-sidebar__search d-flex align-items-center">
    


<input
  type="search"
  class="form-control td-search-input"
  placeholder="&#xf002; Search this site…"
  aria-label="Search this site…"
  autocomplete="off"
  
  data-offline-search-index-json-src="/offline-search-index.223cef4aa7d35ce05d35e863204807e6a69d63ef7911c4224abb1a02b256f8ce123efbb3545e5e6b75e92171b62888069a77c770912f35edb36802526da28593.json"
  data-offline-search-base-href="/"
>


    <button class="btn btn-link td-sidebar__toggle d-md-none p-0 ml-3 fas fa-bars" type="button" data-toggle="collapse" data-target="#td-section-nav" aria-controls="td-docs-nav" aria-expanded="false" aria-label="Toggle section navigation">
    </button>
  </form>
  
  <nav class="collapse td-sidebar-nav pt-2 pl-4" id="td-section-nav">
    
    <div class="nav-item dropdown d-block d-lg-none">
      

<a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
	English
</a>
<div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
	
	<a class="dropdown-item" href="/zh/">简体中文</a>
	
</div>
    </div>
    
    






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/guides/" class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section">Guides</a>
  </li>
  <ul>
    <li class="collapse show" id="guides">
      
      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/guides/introduction/" class="align-left pl-0 pr-2 active td-sidebar-link td-sidebar-link__section">Introduction</a>
  </li>
  <ul>
    <li class="collapse show" id="guidesintroduction">
      
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-guidesintroductionkubectl" href="/guides/introduction/kubectl/">Kubectl</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-guidesintroductionkustomize" href="/guides/introduction/kustomize/">Kustomize</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page  active" id="m-guidesintroductionresources_controllers" href="/guides/introduction/resources_controllers/">Resources &#43; Controllers Overview</a>
      
      
    </li>
  </ul>
</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/guides/config_management/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Configuration Management</a>
  </li>
  <ul>
    <li class="collapse " id="guidesconfig_management">
      
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-guidesconfig_managementintroduction" href="/guides/config_management/introduction/">Introduction</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-guidesconfig_managementapply" href="/guides/config_management/apply/">Apply</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-guidesconfig_managementsecrets_configmaps" href="/guides/config_management/secrets_configmaps/">Secrets and ConfigMaps</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-guidesconfig_managementcontainer_images" href="/guides/config_management/container_images/">Container Images</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-guidesconfig_managementnamespaces_names" href="/guides/config_management/namespaces_names/">Namespaces and Names</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-guidesconfig_managementlabels_annotations" href="/guides/config_management/labels_annotations/">Labels and Annotations</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-guidesconfig_managementbespoke" href="/guides/config_management/bespoke/">Bespoke Application</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-guidesconfig_managementofftheshelf" href="/guides/config_management/offtheshelf/">Off The Shelf Application</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-guidesconfig_managementcomponents" href="/guides/config_management/components/">Kustomize Components</a>
      
      
    </li>
  </ul>
</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/guides/resource_printing/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Resource Printing</a>
  </li>
  <ul>
    <li class="collapse " id="guidesresource_printing">
      
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-guidesresource_printingsummary" href="/guides/resource_printing/summary/">Summaries</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-guidesresource_printingraw" href="/guides/resource_printing/raw/">Raw</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-guidesresource_printingfields" href="/guides/resource_printing/fields/">Fields</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-guidesresource_printingdescribe" href="/guides/resource_printing/describe/">Describe</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-guidesresource_printingqueries_and_options" href="/guides/resource_printing/queries_and_options/">Queries and Options</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-guidesresource_printingcluster_information" href="/guides/resource_printing/cluster_information/">Cluster Information</a>
      
      
    </li>
  </ul>
</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/guides/container_debugging/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Container Debugging</a>
  </li>
  <ul>
    <li class="collapse " id="guidescontainer_debugging">
      
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-guidescontainer_debuggingcontainer_logs" href="/guides/container_debugging/container_logs/">Container Logs</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-guidescontainer_debuggingcopying_container_files" href="/guides/container_debugging/copying_container_files/">Copying Container Files</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-guidescontainer_debuggingexecuting_a_command_in_a_container" href="/guides/container_debugging/executing_a_command_in_a_container/">Executing a command in a container</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-guidescontainer_debuggingport_forward_to_pods" href="/guides/container_debugging/port_forward_to_pods/">Port forward to Pods</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-guidescontainer_debuggingproxying_traffic_to_services" href="/guides/container_debugging/proxying_traffic_to_services/">Proxying traffic to services</a>
      
      
    </li>
  </ul>
</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/guides/app_deployment/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">App Deployment</a>
  </li>
  <ul>
    <li class="collapse " id="guidesapp_deployment">
      
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-guidesapp_deploymentdiffing_local_and_remote_resources" href="/guides/app_deployment/diffing_local_and_remote_resources/">Diffing Local and Remote Resources</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-guidesapp_deploymentaccessing_multiple_clusters" href="/guides/app_deployment/accessing_multiple_clusters/">Accessing Multiple Clusters</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-guidesapp_deploymentpublishing_bases" href="/guides/app_deployment/publishing_bases/">Publishing Bases</a>
      
      
    </li>
  </ul>
</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/guides/extending_kubectl/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Extending Kubectl</a>
  </li>
  <ul>
    <li class="collapse " id="guidesextending_kubectl">
      
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-guidesextending_kubectlplugin_mechanism" href="/guides/extending_kubectl/plugin_mechanism/">Plugin Mechanism</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-guidesextending_kubectldiscovering_plugins" href="/guides/extending_kubectl/discovering_plugins/">Discovering Plugins</a>
      
      
    </li>
  </ul>
</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/guides/extending_kustomize/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Extending Kustomize</a>
  </li>
  <ul>
    <li class="collapse " id="guidesextending_kustomize">
      
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-guidesextending_kustomizebuiltins" href="/guides/extending_kustomize/builtins/">Builtin Plugins</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-guidesextending_kustomizeexecpluginguidedexample" href="/guides/extending_kustomize/execpluginguidedexample/">Exec plugin on linux</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-guidesextending_kustomizegoplugincaveats" href="/guides/extending_kustomize/goplugincaveats/">Go plugin Caveats</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-guidesextending_kustomizegopluginguidedexample" href="/guides/extending_kustomize/gopluginguidedexample/">Go plugin example</a>
      
      
    </li>
  </ul>
</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/guides/example/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Examples</a>
  </li>
  <ul>
    <li class="collapse " id="guidesexample">
      
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-guidesexamplemulti_base" href="/guides/example/multi_base/">Multibase</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-guidesexampleinline_patch" href="/guides/example/inline_patch/">Inline Patch</a>
      
      
    </li>
  </ul>
</ul>

      
      
    </li>
  </ul>
</ul>

  </nav>
</div>




          </div>
          <div class="d-none d-xl-block col-xl-2 td-toc d-print-none">
            






<div class="td-page-meta ml-2 pb-1 pt-2 mb-0">





<a href="https://github.com/kubernetes-sigs/cli-experimental/edit/master/site/content/en/guides/introduction/resources_controllers.md" target="_blank"><i class="fa fa-edit fa-fw"></i> Edit this page</a>
<a href="https://github.com/kubernetes-sigs/cli-experimental/issues/new?title=Resources%20&#43;%20Controllers%20Overview" target="_blank"><i class="fab fa-github fa-fw"></i> Create documentation issue</a>


<a href="https://github.com/kubernetes-sigs/cli-experimental/issues/new" target="_blank"><i class="fas fa-tasks fa-fw"></i> Create project issue</a>

</div>






<nav id="TableOfContents">
  <ul>
    <li><a href="#resources">Resources</a>
      <ul>
        <li><a href="#resources-structure">Resources Structure</a></li>
      </ul>
    </li>
    <li><a href="#controllers">Controllers</a>
      <ul>
        <li><a href="#controller-structure">Controller Structure</a></li>
      </ul>
    </li>
    <li><a href="#overview-of-kubernetes-resource-apis">Overview of Kubernetes Resource APIs</a>
      <ul>
        <li><a href="#pods">Pods</a></li>
        <li><a href="#workloads">Workloads</a></li>
        <li><a href="#service-discovery-and-load-balancing">Service Discovery and Load Balancing</a></li>
        <li><a href="#configuration-and-secrets">Configuration and Secrets</a></li>
      </ul>
    </li>
  </ul>
</nav>



          </div>
          <main class="col-12 col-md-9 col-xl-8 pl-md-5" role="main">
            
  

            <nav aria-label="breadcrumb" class="d-none d-md-block d-print-none">
	<ol class="breadcrumb spb-1">
		










<li class="breadcrumb-item" >
	<a href="https://kubectl.docs.kubernetes.io/guides/">Guides</a>
</li>




<li class="breadcrumb-item" >
	<a href="https://kubectl.docs.kubernetes.io/guides/introduction/">Introduction</a>
</li>




<li class="breadcrumb-item active" aria-current="page">
	<a href="https://kubectl.docs.kubernetes.io/guides/introduction/resources_controllers/">Resources &#43; Controllers Overview</a>
</li>

	</ol>
</nav	>

            
<div class="td-content">
	<h1>Resources &#43; Controllers Overview</h1>
	<div class="lead">Kubernetes Resources and Controllers Overview</div>
	

<div class="alert alert-success" role="alert">
<h4 class="alert-heading">TL;DR</h4>
<ul>
<li>A Kubernetes API has 2 parts - a Resource Type and a Controller</li>
<li>Resources are objects declared as json or yaml and written to a cluster</li>
<li>Controllers asynchronously actuate Resources after they are stored</li>
</ul>

</div>

<p>This section provides background on the Kubernetes Resource model.  This information
is also available at the <a href="https://kubernetes.io/docs/home/">kubernetes.io</a> docs site.</p>
<p>For more information on Kubernetes Resources see: <a href="https://kubernetes.io/docs/concepts/">kubernetes.io Concepts</a>.</p>
<h2 id="resources">Resources</h2>
<p>Instances of Kubernetes objects (e.g. Deployment, Services, Namespaces, etc)
are called <strong>Resources</strong>.</p>
<p>Resources which run containers are referred to as <strong>Workloads</strong>.</p>
<p>Examples of Workloads:</p>
<ul>
<li><a href="https://kubernetes.io/docs/concepts/workloads/controllers/deployment/">Deployments</a></li>
<li><a href="https://kubernetes.io/docs/concepts/workloads/controllers/statefulset/">StatefulSets</a></li>
<li><a href="https://kubernetes.io/docs/concepts/workloads/controllers/jobs-run-to-completion/">Jobs</a></li>
<li><a href="https://kubernetes.io/docs/concepts/workloads/controllers/cron-jobs/">CronJobs</a></li>
<li><a href="https://kubernetes.io/docs/concepts/workloads/controllers/daemonset/">DaemonSets</a></li>
</ul>
<p><strong>Users work with Resource APIs by declaring them in files which are then Applied to a Kubernetes
cluster.  These declarative files are called Resource Config.</strong></p>
<p>Resource Config is <em>Applied</em> (declarative Create/Update/Delete) to a Kubernetes cluster using
tools such as Kubectl, and then actuated by a <em>Controller</em>.</p>
<p>Resources are uniquely identified:</p>
<ul>
<li><strong>apiVersion</strong> (API Type Group and Version)</li>
<li><strong>kind</strong> (API Type Name)</li>
<li><strong>metadata.namespace</strong> (Instance namespace)</li>
<li><strong>metadata.name</strong> (Instance name)</li>
</ul>


<div class="alert alert-warning" role="alert">
<h4 class="alert-heading">Default Namespace</h4>
If namespace is omitted from the Resource Config, the <em>default</em> namespace is used.  Users
should almost always explicitly specify the namespace for their Application using a
<code>kustomization.yaml</code>.
</div>

<h3 id="resources-structure">Resources Structure</h3>
<p>Resources have the following components.</p>
<p><strong>TypeMeta:</strong> Resource Type <strong>apiVersion</strong> and <strong>kind</strong>.</p>
<p><strong>ObjectMeta:</strong> Resource <strong>name</strong> and <strong>namespace</strong> + other metadata (labels, annotations, etc).</p>
<p><strong>Spec:</strong> the desired state of the Resource - intended state the user provides to the cluster.</p>
<p><strong>Status:</strong> the observed state of the object - recorded state the cluster provides to the user.</p>
<p>Resource Config written by the user omits the Status field.</p>
<p><strong>Example Deployment Resource Config</strong></p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#204a87;font-weight:bold">apiVersion</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>apps/v1<span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">kind</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>Deployment<span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">metadata</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">name</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>nginx-deployment<span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">labels</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">app</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>nginx<span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">spec</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">replicas</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:bold">3</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">selector</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">matchLabels</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">app</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>nginx<span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">template</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">metadata</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">labels</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:bold">app</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>nginx<span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">spec</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">containers</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">      </span>- <span style="color:#204a87;font-weight:bold">name</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>nginx<span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:bold">image</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>nginx<span style="color:#000;font-weight:bold">:</span><span style="color:#0000cf;font-weight:bold">1.15.4</span><span style="color:#f8f8f8;text-decoration:underline">
</span></code></pre></div>

<div class="alert alert-success" role="alert">
<h4 class="alert-heading">Spec and Status</h4>
Resources such as ConfigMaps and Secrets do not have a Status,
and as a result their Spec is implicit (i.e. they don&rsquo;t have a spec field).
</div>

<h2 id="controllers">Controllers</h2>
<p>Controllers actuate Kubernetes APIs.  They observe the state of the system and look for
changes either to desired state of Resources (create, update, delete) or the system
(Pod or Node dies).</p>
<p>Controllers then make changes to the cluster to fulfill the intent specified by the user
(e.g. in Resource Config) or automation (e.g. changes from Autoscalers).</p>
<p><strong>Example:</strong> After a user creates a Deployment, the Deployment Controller will see
that the Deployment exists and verify that the corresponding ReplicaSet it expects
to find exists.  The Controller will see that the ReplicaSet does not exist and will
create one.</p>


<div class="alert alert-warning" role="alert">
<h4 class="alert-heading">Asynchronous Actuation</h4>
Because Controllers run asynchronously, issues such as a bad
Container Image or unschedulable Pods will not be present in the CRUD response.
Tooling must facilitate processes for watching the state of the system until changes are
completely actuated by Controllers.  Once the changes have been fully actuated such
that the desired state matches the observed state, the Resource is considered <em>Settled</em>.
</div>

<h3 id="controller-structure">Controller Structure</h3>
<p><strong>Reconcile</strong></p>
<p>Controllers actuate Resources by reading the Resource they are Reconciling + related Resources,
such as those that they create and delete.</p>
<p><strong>Controllers <em>do not</em> Reconcile events, rather they Reconcile the expected
cluster state to the observed cluster state at the time Reconcile is run.</strong></p>
<ol>
<li>Deployment Controller creates/deletes ReplicaSets</li>
<li>ReplicaSet Controller creates/deletes Pods</li>
<li>Scheduler (Controller) writes Nodes to Pods</li>
<li>Node (Controller) runs Containers specified in Pods on the Node</li>
</ol>
<p><strong>Watch</strong></p>
<p>Controllers actuate Resources <em>after</em> they are written by Watching Resource Types, and then
triggering Reconciles from Events.  After a Resource is created/updated/deleted, Controllers
Watching the Resource Type will receive a notification that the Resource has been changed,
and they will read the state of the system to see what has changed (instead of relying on
the Event for this information).</p>
<ul>
<li>Deployment Controller watches Deployments + ReplicaSets (+ Pods)</li>
<li>ReplicaSet Controller watches ReplicaSets + Pods</li>
<li>Scheduler (Controller) watches Pods</li>
<li>Node (Controller) watches Pods (+ Secrets + ConfigMaps)</li>
</ul>


<div class="alert alert-success" role="alert">
<h4 class="alert-heading">Level vs Edge Based Reconciliation</h4>
Because Controllers don&rsquo;t respond to individual Events, but instead Reconcile the state
of the system at the time that Reconcile is run, <strong>changes from several different events may be observed
and Reconciled together.</strong>  This is referred to as a <em>Level Based</em> system, whereas a system that
responds to each event individually would be referred to as an <em>Edge Based</em> system.
</div>

<h2 id="overview-of-kubernetes-resource-apis">Overview of Kubernetes Resource APIs</h2>
<h3 id="pods">Pods</h3>
<p>Containers are run in <a href="https://kubernetes.io/docs/concepts/workloads/pods/pod-overview/"><em>Pods</em></a> which are
scheduled to run on <em>Nodes</em> (i.e. worker machines) in a cluster.</p>
<p>Pods run a <em>single replica</em> of an Application and provide:</p>
<ul>
<li>Compute Resources (cpu, memory, disk)</li>
<li>Environment Variables</li>
<li>Readiness and Health Checking</li>
<li>Network (IP address shared by containers in the Pod)</li>
<li>Mounting Shared Configuration and Secrets</li>
<li>Mounting Storage Volumes</li>
<li>Initialization</li>
</ul>


<div class="alert alert-warning" role="alert">
<h4 class="alert-heading">Multi Container Pods</h4>
<p>Multiple replicas of an Application should be created using a Workload API to manage
creation and deletion of Pod replicas using a PodTemplate.</p>
<p>In some cases a Pod may contain multiple Containers forming a single instance of an Application.  These
containers may coordinate with one another through shared network (IP) and storage.</p>

</div>

<h3 id="workloads">Workloads</h3>
<p>Pods are typically managed by higher level abstractions that handle concerns such as
replication, identity, persistent storage, custom scheduling, rolling updates, etc.</p>
<p>The most common out-of-the-box Workload APIs (manage Pods) are:</p>
<ul>
<li><a href="https://kubernetes.io/docs/concepts/workloads/controllers/deployment/">Deployments</a> (Stateless Applications)
<ul>
<li>replication + rollouts</li>
</ul>
</li>
<li><a href="https://kubernetes.io/docs/concepts/workloads/controllers/statefulset/">StatefulSets</a> (Stateful Applications)
<ul>
<li>replication + rollouts + persistent storage + identity</li>
</ul>
</li>
<li><a href="https://kubernetes.io/docs/concepts/workloads/controllers/jobs-run-to-completion/">Jobs</a> (Batch Work)
<ul>
<li>run to completion</li>
</ul>
</li>
<li><a href="https://kubernetes.io/docs/concepts/workloads/controllers/cron-jobs/">CronJobs</a> (Scheduled Batch Work)
<ul>
<li>scheduled run to completion</li>
</ul>
</li>
<li><a href="https://kubernetes.io/docs/concepts/workloads/controllers/daemonset/">DaemonSets</a> (Per-Machine)
<ul>
<li>per-Node scheduling</li>
</ul>
</li>
</ul>


<div class="alert alert-warning" role="alert">
<h4 class="alert-heading">API Abstraction Layers</h4>
High-level Workload APIs may manage lower-level Workload APIs instead of directly managing Pods
(e.g. Deployments manage ReplicaSets).
</div>

<h3 id="service-discovery-and-load-balancing">Service Discovery and Load Balancing</h3>
<p>Service discovery and Load Balancing may be managed by a <em>Service</em> object.  Services provide a single
virtual IP address and dns name load balanced to a collection of Pods matching Labels.</p>


<div class="alert alert-success" role="alert">
<h4 class="alert-heading">Internal vs External Services</h4>
<ul>
<li><a href="https://kubernetes.io/docs/concepts/services-networking/service/">Services Resources</a>
(L4) may expose Pods internally within a cluster or externally through an HA proxy.</li>
<li><a href="https://kubernetes.io/docs/concepts/services-networking/ingress/">Ingress Resources</a> (L7)
may expose URI endpoints and route them to Services.</li>
</ul>

</div>

<h3 id="configuration-and-secrets">Configuration and Secrets</h3>
<p>Shared Configuration and Secret data may be provided by ConfigMaps and Secrets.  This allows
Environment Variables, Command Line Arguments and Files to be loosely injected into
the Pods and Containers that consume them.</p>


<div class="alert alert-success" role="alert">
<h4 class="alert-heading">Internal vs External Services</h4>
<ul>
<li><a href="https://kubernetes.io/docs/tasks/configure-pod-container/configure-pod-configmap/">ConfigMaps</a>
are for providing non-sensitive data to Pods.</li>
<li><a href="https://kubernetes.io/docs/concepts/configuration/secret/">Secrets</a>
are for providing sensitive data to Pods.</li>
</ul>

</div>


	
		<style>
  .feedback--answer {
    display: inline-block;
  }
  .feedback--answer-no {
    margin-left: 1em;
  }
  .feedback--response {
    display: none;
    margin-top: 1em;
  }
  .feedback--response__visible {
    display: block;
  }
</style>
<h2 class="feedback--title">Feedback</h2>
<p class="feedback--question">Was this page helpful?</p>
<button class="feedback--answer feedback--answer-yes">Yes</button>
<button class="feedback--answer feedback--answer-no">No</button>
<p class="feedback--response feedback--response-yes">
  Glad to hear it! Please <a href="https://github.com/kubernetes-sigs/cli-experimental/issues/new">tell us how we can improve</a>.
</p>
<p class="feedback--response feedback--response-no">
  Sorry to hear that. Please <a href="https://github.com/kubernetes-sigs/cli-experimental/issues/new">tell us how we can improve</a>.
</p>
<script>
  const yesButton = document.querySelector('.feedback--answer-yes');
  const noButton = document.querySelector('.feedback--answer-no');
  const yesResponse = document.querySelector('.feedback--response-yes');
  const noResponse = document.querySelector('.feedback--response-no');
  const disableButtons = () => {
    yesButton.disabled = true;
    noButton.disabled = true;
  };
  const sendFeedback = (value) => {
    if (typeof ga !== 'function') return;
    const args = {
      command: 'send',
      hitType: 'event',
      category: 'Helpful',
      action: 'click',
      label: window.location.pathname,
      value: value
    };
    ga(args.command, args.hitType, args.category, args.action, args.label, args.value);
  };
  yesButton.addEventListener('click', () => {
    yesResponse.classList.add('feedback--response__visible');
    disableButtons();
    sendFeedback(1);
  });
  noButton.addEventListener('click', () => {
    noResponse.classList.add('feedback--response__visible');
    disableButtons();
    sendFeedback(0);
  });
</script>

		<br />
	
	
	<div class="text-muted mt-5 pt-3 border-top">Last modified September 23, 2020: <a  href="https://github.com/kubernetes-sigs/cli-experimental/commit/b46eb865e1ab737ad6fbcb67d153303e53b79c8c">docs update (b46eb86)</a>
</div>
</div>


          </main>
        </div>
      </div>
      
<footer class="bg-dark py-5 row d-print-none">
  <div class="container-fluid mx-sm-5">
    <div class="row">
      <div class="col-6 col-sm-4 text-xs-center order-sm-2">
        
      </div>
      <div class="col-6 col-sm-4 text-right text-xs-center order-sm-3">
        
      </div>
      <div class="col-12 col-sm-4 text-center py-2 order-sm-2">
        <small class="text-white">&copy; 2021 SIG CLI | Documentation Distributed under CC BY 4.0 |  All Rights Reserved</small>
        
	
		
	
      </div>
    </div>
  </div>
</footer>


    </div>
    
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>









<script src="/js/main.min.3587468abafd7ee678f61330f7c574ba0376f12451f11e076f2283f1e0504095.js" integrity="sha256-NYdGirr9fuZ49hMw98V0ugN28SRR8R4HbyKD8eBQQJU=" crossorigin="anonymous"></script>



  </body>
</html>